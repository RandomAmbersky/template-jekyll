# template-jekyll

1) Конфигурация была написана для того, чтобы не тащить Ruby в систему хоста.
2) Конфигурация был написана потому что стандардтный докер-образ из репозитория
Jekyll создавал неработающее непонятно что, которое требовало доработки
напильником и консультаций с DeepSeek.
Задача проекта - создать приемлемую docker-конфигурацию для автоматической инициализации и ведения блога на `Jekyll`

Перед работой необходимо сохранить копию файла `.env-example` с именем `.env`
и заменить в нем переменные на свои. Конфигурация работает с авторизацией по ключу, который ищется в папке `~/.ssh/`.

Команды:
```
  make <command>
    clone -  клонировать обьект из git в папку блога
    new -  инициализировать содержимое папки блога
    serve - запустить блог локально
    anonimize - установить одного автора комментариев в истории git
```

Содержимое .env файла:

```
  GITHUB_BRANCH - ветка git (main)
  SITE_DIR - имя локальной папки блога (my-awesome-site)
  GITHUB_REPO - адрес гит-репозитория (git@github.com:username/username.github.io.git)
  ITHUB_KEY_NAME - имя ключа git (ed_username)
  GITHUB_USER_NAME - имя пользователя git, который будет указан в коммите (username)
  GITHUB_USER_EMAIL - е-майл пользователя git, который будет указан коммите (username@username.com)
```

## * Клонировать проект в папку

```
  make clone
```

Если папки нет то она автоматически создается.

## * Запустить блог локально

```
  make serve
```

Поднимается docker-конфигурация с превью-доступом по http://127.0.0.1:4000 и hot-reload. После правок в папке блог автоматически пересобирается, обновление
открытой странички не требует перезагрузки.

## * Создать новый блог

```
  make new
```

В папку блога копируется стартовый набор файлов для `Jekyll`. Если папки нет, то она создается.

## * Исправить автора коммитов
```
  make anonimize
```

Все `user.name` и `user.email` заменяются значениями из `.env`. Это меняет историю коммитов,
после чего `git push` срабатывает только с ключиком `--force`


# О разработке с DeepSeek

Громадную работу проделал DeepSeek, отвечая на мои вопросы, и по большей части правильно.
Правда он обманывал меня, убеждая что на GitHub Pages нужна 4.x.x версия Jekyll, когда там стояла 3.x.x :)

# Версия 2.0

Подумал что хорошо бы иметь возможность работать с несколькими папками чтобы если нужно вести сразу
несколько дневников на разных сайтах, то не качать `template-jekyll` каждый раз на каждый дневник,
а хранить все папки дневников в одной директории, указывая в команде какой текущий дневник брать.
Сделал работу с разными папками через указание в переменной текущей конфигурации `ENV=.env-my-awesome-site`

# О wizard

Подумал о том чтобы сделать некий wizard для формирования .env файла на основе ряда задаваемых
вопросов, но так как создание такого файла операция не слишком частая, отказался. Вполне допустимо
формировать вручную.


# О переносе команд из make в shell

Подумал о том что было бы неплохо перенести команды из make в shell-файлы, вызывая из make только
shell-скрипты. Пока удалось обойтись
